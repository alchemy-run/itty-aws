import { Schema} from "effect"
import { FormatXMLRequest, FormatXMLResponse, makeOperation } from "../client";
import { Operation, Path, Header, StreamBody, Body, ErrorAnnotation } from "../schema-helpers";
const InputFlowNodeConfiguration = Schema.Struct({})
const OutputFlowNodeConfiguration = Schema.Struct({})
const IteratorFlowNodeConfiguration = Schema.Struct({})
const CollectorFlowNodeConfiguration = Schema.Struct({})
const LoopInputFlowNodeConfiguration = Schema.Struct({})
const FlowNodeInput = Schema.Struct({name: Schema.String, type: Schema.String, expression: Schema.String, category: Schema.optional(Schema.String)})
const FlowNodeInputs = Schema.Array(FlowNodeInput)
const FlowNodeOutput = Schema.Struct({name: Schema.String, type: Schema.String})
const FlowNodeOutputs = Schema.Array(FlowNodeOutput)
const LexFlowNodeConfiguration = Schema.Struct({botAliasArn: Schema.String, localeId: Schema.String})
const LambdaFunctionFlowNodeConfiguration = Schema.Struct({lambdaArn: Schema.String})
const AgentFlowNodeConfiguration = Schema.Struct({agentAliasArn: Schema.String})
const InlineCodeFlowNodeConfiguration = Schema.Struct({code: Schema.String, language: Schema.String})
const LoopFlowNodeConfiguration = Schema.Struct({definition: FlowDefinition})
const LoopControllerFlowNodeConfiguration = Schema.Struct({continueCondition: FlowCondition, maxIterations: Schema.optional(Schema.Number)})
const FlowDataConnectionConfiguration = Schema.Struct({sourceOutput: Schema.String, targetInput: Schema.String})
const FlowConditionalConnectionConfiguration = Schema.Struct({condition: Schema.String})
const FlowConnectionConfiguration = Schema.Union(FlowDataConnectionConfiguration, FlowConditionalConnectionConfiguration)
const GuardrailConfiguration = Schema.Struct({guardrailIdentifier: Schema.optional(Schema.String), guardrailVersion: Schema.optional(Schema.String)})
const KnowledgeBasePromptTemplate = Schema.Struct({textPromptTemplate: Schema.optional(Schema.String)})
const FlowCondition = Schema.Struct({name: Schema.String, expression: Schema.optional(Schema.String)})
const FlowConditions = Schema.Array(FlowCondition)
const StopSequences = Schema.Array(Schema.String)
const FlowConnection = Schema.Struct({type: Schema.String, name: Schema.String, source: Schema.String, target: Schema.String, configuration: Schema.optional(FlowConnectionConfiguration)})
const FlowConnections = Schema.Array(FlowConnection)
const ConditionFlowNodeConfiguration = Schema.Struct({conditions: FlowConditions})
const PromptModelInferenceConfiguration = Schema.Struct({temperature: Schema.optional(Schema.Number), topP: Schema.optional(Schema.Number), maxTokens: Schema.optional(Schema.Number), stopSequences: Schema.optional(StopSequences)})
const AdditionalModelRequestFields = Schema.Record({key: Schema.String, value: Schema.JsonValue})
const PerformanceConfiguration = Schema.Struct({latency: Schema.optional(Schema.String)})
const PromptFlowNodeResourceConfiguration = Schema.Struct({promptArn: Schema.String})
const StorageFlowNodeS3Configuration = Schema.Struct({bucketName: Schema.String})
const RetrievalFlowNodeS3Configuration = Schema.Struct({bucketName: Schema.String})
const PromptInferenceConfiguration = Schema.Union(PromptModelInferenceConfiguration)
const KnowledgeBaseOrchestrationConfiguration = Schema.Struct({promptTemplate: Schema.optional(KnowledgeBasePromptTemplate), inferenceConfig: Schema.optional(PromptInferenceConfiguration), additionalModelRequestFields: Schema.optional(AdditionalModelRequestFields), performanceConfig: Schema.optional(PerformanceConfiguration)})
const StorageFlowNodeServiceConfiguration = Schema.Union(StorageFlowNodeS3Configuration)
const RetrievalFlowNodeServiceConfiguration = Schema.Union(RetrievalFlowNodeS3Configuration)
const VectorSearchBedrockRerankingModelConfiguration = Schema.Struct({modelArn: Schema.String, additionalModelRequestFields: Schema.optional(AdditionalModelRequestFields)})
const StorageFlowNodeConfiguration = Schema.Struct({serviceConfiguration: StorageFlowNodeServiceConfiguration})
const RetrievalFlowNodeConfiguration = Schema.Struct({serviceConfiguration: RetrievalFlowNodeServiceConfiguration})
const FieldForReranking = Schema.Struct({fieldName: Schema.String})
const FieldsForReranking = Schema.Array(FieldForReranking)
const CachePointBlock = Schema.Struct({type: Schema.String})
const PromptInputVariable = Schema.Struct({name: Schema.optional(Schema.String)})
const PromptInputVariablesList = Schema.Array(PromptInputVariable)
const SystemContentBlock = Schema.Union(Schema.String, CachePointBlock)
const SystemContentBlocks = Schema.Array(SystemContentBlock)
const AutoToolChoice = Schema.Struct({})
const AnyToolChoice = Schema.Struct({})
const RerankingMetadataSelectiveModeConfiguration = Schema.Union(FieldsForReranking, FieldsForReranking)
const TextPromptTemplateConfiguration = Schema.Struct({text: Schema.String, cachePoint: Schema.optional(CachePointBlock), inputVariables: Schema.optional(PromptInputVariablesList)})
const ContentBlock = Schema.Union(Schema.String, CachePointBlock)
const ContentBlocks = Schema.Array(ContentBlock)
const MetadataConfigurationForReranking = Schema.Struct({selectionMode: Schema.String, selectiveModeConfiguration: Schema.optional(RerankingMetadataSelectiveModeConfiguration)})
const Message = Schema.Struct({role: Schema.String, content: ContentBlocks})
const Messages = Schema.Array(Message)
const VectorSearchBedrockRerankingConfiguration = Schema.Struct({modelConfiguration: VectorSearchBedrockRerankingModelConfiguration, numberOfRerankedResults: Schema.optional(Schema.Number), metadataConfiguration: Schema.optional(MetadataConfigurationForReranking)})
const SpecificToolChoice = Schema.Struct({name: Schema.String})
const VectorSearchRerankingConfiguration = Schema.Struct({type: Schema.String, bedrockRerankingConfiguration: Schema.optional(VectorSearchBedrockRerankingConfiguration)})
const ToolChoice = Schema.Union(AutoToolChoice, AnyToolChoice, SpecificToolChoice)
const ToolInputSchema = Schema.Union(Schema.JsonValue)
const KnowledgeBaseFlowNodeConfiguration = Schema.Struct({knowledgeBaseId: Schema.String, modelId: Schema.optional(Schema.String), guardrailConfiguration: Schema.optional(GuardrailConfiguration), numberOfResults: Schema.optional(Schema.Number), promptTemplate: Schema.optional(KnowledgeBasePromptTemplate), inferenceConfiguration: Schema.optional(PromptInferenceConfiguration), rerankingConfiguration: Schema.optional(VectorSearchRerankingConfiguration), orchestrationConfiguration: Schema.optional(KnowledgeBaseOrchestrationConfiguration)})
const ToolSpecification = Schema.Struct({name: Schema.String, description: Schema.optional(Schema.String), inputSchema: ToolInputSchema})
const Tool = Schema.Union(ToolSpecification, CachePointBlock)
const Tools = Schema.Array(Tool)
const ToolConfiguration = Schema.Struct({tools: Tools, toolChoice: Schema.optional(ToolChoice)})
const ChatPromptTemplateConfiguration = Schema.Struct({messages: Messages, system: Schema.optional(SystemContentBlocks), inputVariables: Schema.optional(PromptInputVariablesList), toolConfiguration: Schema.optional(ToolConfiguration)})
const PromptTemplateConfiguration = Schema.Union(TextPromptTemplateConfiguration, ChatPromptTemplateConfiguration)
const PromptFlowNodeInlineConfiguration = Schema.Struct({templateType: Schema.String, templateConfiguration: PromptTemplateConfiguration, modelId: Schema.String, inferenceConfiguration: Schema.optional(PromptInferenceConfiguration), additionalModelRequestFields: Schema.optional(Schema.JsonValue)})
const PromptFlowNodeSourceConfiguration = Schema.Union(PromptFlowNodeResourceConfiguration, PromptFlowNodeInlineConfiguration)
const PromptFlowNodeConfiguration = Schema.Struct({sourceConfiguration: PromptFlowNodeSourceConfiguration, guardrailConfiguration: Schema.optional(GuardrailConfiguration)})
const FlowNodeConfiguration = Schema.Union(InputFlowNodeConfiguration, OutputFlowNodeConfiguration, KnowledgeBaseFlowNodeConfiguration, ConditionFlowNodeConfiguration, LexFlowNodeConfiguration, PromptFlowNodeConfiguration, LambdaFunctionFlowNodeConfiguration, StorageFlowNodeConfiguration, AgentFlowNodeConfiguration, RetrievalFlowNodeConfiguration, IteratorFlowNodeConfiguration, CollectorFlowNodeConfiguration, InlineCodeFlowNodeConfiguration, LoopFlowNodeConfiguration, LoopInputFlowNodeConfiguration, LoopControllerFlowNodeConfiguration)
const FlowNode = Schema.Struct({name: Schema.String, type: Schema.String, configuration: Schema.optional(FlowNodeConfiguration), inputs: Schema.optional(FlowNodeInputs), outputs: Schema.optional(FlowNodeOutputs)})
const FlowNodes = Schema.Array(FlowNode)
const FlowDefinition = Schema.Struct({nodes: Schema.optional(FlowNodes), connections: Schema.optional(FlowConnections)})
const ValidateFlowDefinitionRequest = Schema.Struct({definition: FlowDefinition})
const MissingEndingNodesFlowValidationDetails = Schema.Struct({})
const MissingStartingNodesFlowValidationDetails = Schema.Struct({})
const UnspecifiedFlowValidationDetails = Schema.Struct({})
const CyclicConnectionFlowValidationDetails = Schema.Struct({connection: Schema.String})
const DuplicateConnectionsFlowValidationDetails = Schema.Struct({source: Schema.String, target: Schema.String})
const DuplicateConditionExpressionFlowValidationDetails = Schema.Struct({node: Schema.String, expression: Schema.String})
const UnreachableNodeFlowValidationDetails = Schema.Struct({node: Schema.String})
const UnknownConnectionSourceFlowValidationDetails = Schema.Struct({connection: Schema.String})
const UnknownConnectionSourceOutputFlowValidationDetails = Schema.Struct({connection: Schema.String})
const UnknownConnectionTargetFlowValidationDetails = Schema.Struct({connection: Schema.String})
const UnknownConnectionTargetInputFlowValidationDetails = Schema.Struct({connection: Schema.String})
const UnknownConnectionConditionFlowValidationDetails = Schema.Struct({connection: Schema.String})
const MalformedConditionExpressionFlowValidationDetails = Schema.Struct({node: Schema.String, condition: Schema.String, cause: Schema.String})
const MalformedNodeInputExpressionFlowValidationDetails = Schema.Struct({node: Schema.String, input: Schema.String, cause: Schema.String})
const MismatchedNodeInputTypeFlowValidationDetails = Schema.Struct({node: Schema.String, input: Schema.String, expectedType: Schema.String})
const MismatchedNodeOutputTypeFlowValidationDetails = Schema.Struct({node: Schema.String, output: Schema.String, expectedType: Schema.String})
const IncompatibleConnectionDataTypeFlowValidationDetails = Schema.Struct({connection: Schema.String})
const MissingConnectionConfigurationFlowValidationDetails = Schema.Struct({connection: Schema.String})
const MissingDefaultConditionFlowValidationDetails = Schema.Struct({node: Schema.String})
const MissingNodeConfigurationFlowValidationDetails = Schema.Struct({node: Schema.String})
const MissingNodeInputFlowValidationDetails = Schema.Struct({node: Schema.String, input: Schema.String})
const MissingNodeOutputFlowValidationDetails = Schema.Struct({node: Schema.String, output: Schema.String})
const MultipleNodeInputConnectionsFlowValidationDetails = Schema.Struct({node: Schema.String, input: Schema.String})
const UnfulfilledNodeInputFlowValidationDetails = Schema.Struct({node: Schema.String, input: Schema.String})
const UnsatisfiedConnectionConditionsFlowValidationDetails = Schema.Struct({connection: Schema.String})
const UnknownNodeInputFlowValidationDetails = Schema.Struct({node: Schema.String, input: Schema.String})
const UnknownNodeOutputFlowValidationDetails = Schema.Struct({node: Schema.String, output: Schema.String})
const MissingLoopInputNodeFlowValidationDetails = Schema.Struct({loopNode: Schema.String})
const MissingLoopControllerNodeFlowValidationDetails = Schema.Struct({loopNode: Schema.String})
const MultipleLoopInputNodesFlowValidationDetails = Schema.Struct({loopNode: Schema.String})
const MultipleLoopControllerNodesFlowValidationDetails = Schema.Struct({loopNode: Schema.String})
const LoopIncompatibleNodeTypeFlowValidationDetails = Schema.Struct({node: Schema.String, incompatibleNodeType: Schema.String, incompatibleNodeName: Schema.String})
const InvalidLoopBoundaryFlowValidationDetails = Schema.Struct({connection: Schema.String, source: Schema.String, target: Schema.String})
const FlowValidationDetails = Schema.Union(CyclicConnectionFlowValidationDetails, DuplicateConnectionsFlowValidationDetails, DuplicateConditionExpressionFlowValidationDetails, UnreachableNodeFlowValidationDetails, UnknownConnectionSourceFlowValidationDetails, UnknownConnectionSourceOutputFlowValidationDetails, UnknownConnectionTargetFlowValidationDetails, UnknownConnectionTargetInputFlowValidationDetails, UnknownConnectionConditionFlowValidationDetails, MalformedConditionExpressionFlowValidationDetails, MalformedNodeInputExpressionFlowValidationDetails, MismatchedNodeInputTypeFlowValidationDetails, MismatchedNodeOutputTypeFlowValidationDetails, IncompatibleConnectionDataTypeFlowValidationDetails, MissingConnectionConfigurationFlowValidationDetails, MissingDefaultConditionFlowValidationDetails, MissingEndingNodesFlowValidationDetails, MissingNodeConfigurationFlowValidationDetails, MissingNodeInputFlowValidationDetails, MissingNodeOutputFlowValidationDetails, MissingStartingNodesFlowValidationDetails, MultipleNodeInputConnectionsFlowValidationDetails, UnfulfilledNodeInputFlowValidationDetails, UnsatisfiedConnectionConditionsFlowValidationDetails, UnspecifiedFlowValidationDetails, UnknownNodeInputFlowValidationDetails, UnknownNodeOutputFlowValidationDetails, MissingLoopInputNodeFlowValidationDetails, MissingLoopControllerNodeFlowValidationDetails, MultipleLoopInputNodesFlowValidationDetails, MultipleLoopControllerNodesFlowValidationDetails, LoopIncompatibleNodeTypeFlowValidationDetails, InvalidLoopBoundaryFlowValidationDetails)
const FlowValidation = Schema.Struct({message: Schema.String, severity: Schema.String, details: Schema.optional(FlowValidationDetails), type: Schema.optional(Schema.String)})
const FlowValidations = Schema.Array(FlowValidation)
const ValidateFlowDefinitionResponse = Schema.Struct({validations: FlowValidations})
const AccessDeniedException = Schema.Struct({message: Schema.optional(Schema.String)})
const InternalServerException = Schema.Struct({message: Schema.optional(Schema.String)})
const ThrottlingException = Schema.Struct({message: Schema.optional(Schema.String)})
const ValidationExceptionField = Schema.Struct({name: Schema.String, message: Schema.String})
const ValidationExceptionFieldList = Schema.Array(ValidationExceptionField)
const ValidationException = Schema.Struct({message: Schema.optional(Schema.String), fieldList: Schema.optional(ValidationExceptionFieldList)})
export const ValidateFlowDefinition = /*#__PURE__*/ makeOperation(() => Operation({ uri: "/flows/validate-definition", method: "POST", sdkId: "Bedrock Agent", sigV4ServiceName: "bedrock", name: "ValidateFlowDefinition" }, ValidateFlowDefinitionRequest, ValidateFlowDefinitionResponse, Schema.Union(ErrorAnnotation("AccessDeniedException", AccessDeniedException), ErrorAnnotation("InternalServerException", InternalServerException), ErrorAnnotation("ThrottlingException", ThrottlingException), ErrorAnnotation("ValidationException", ValidationException))), FormatXMLRequest, FormatXMLResponse, FormatXMLResponse);
